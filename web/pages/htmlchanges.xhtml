<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="../stylesheet.css" />
        <script>
            //<![CDATA[
            function addOnclickToDatatableRows() {
                var trs = document.getElementById('form:dataTable').getElementsByTagName('tbody')[0]
                .getElementsByTagName('tr');
                for (var i = 0; i < trs.length; i++) {
                    trs[i].onmouseover = new Function("this.bgColor='#d0d0d0'");
                    trs[i].onmouseout = new Function("this.bgColor='#ffffff'");
                    trs[i].onclick = new Function("highlightAndSelectRow(this)");
                }
            }

            function highlightAndSelectRow(tr) {
                var trs = document.getElementById('form:dataTable').getElementsByTagName('tbody')[0]
                .getElementsByTagName('tr');
                for (var i = 0; i < trs.length; i++) {
                    if (trs[i] == tr) {
                        document.form.rowIndex.value = trs[i].rowIndex;
                        document.getElementById('form:updateEdit').click();
                    }                    
                }
            }

            window.onload = addOnclickToDatatableRows;
            //]]>
        </script>
    </head>
    <body>
        <div id="tablediv">
            <h:form id="form">
                <h:dataTable id="dataTable"
                             styleClass="view-table"
                             headerClass="view-table-header"
                             rowClasses="view-table-odd-row,view-table-even-row"
                             binding="#{htmlBean.dataTable}" 
                             value="#{htmlBean.changesList}" 
                             var="dataItem" rows="18">

                    <h:column>
                        <f:facet name="header">
                            URL
                        </f:facet>
                        #{dataItem.url}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            Date
                        </f:facet>
                        #{dataItem.dlDate}
                    </h:column>

                </h:dataTable>  
                <input type="hidden" name="rowIndex" />
                    <h:commandLink id="updateEdit" type="hidden" 
                                   immediate="true" action="#{htmlBean.selectChange()}">
                        <f:actionListener binding="#{changeBean.setType('html')}"/>
                    </h:commandLink>
            </h:form>
        </div>
        <div id="navbtn">
            <h:form>
                <h:panelGrid columns="4" width="100%">
                    <h:commandButton value="first" 
                                     action="#{htmlBean.pageFirst}"
                                     disabled="#{htmlBean.dataTable.first == 0}" />
                    <h:commandButton value="prev" 
                                     action="#{htmlBean.pagePrevious}"
                                     disabled="#{htmlBean.dataTable.first == 0}" />
                    <h:commandButton value="next" 
                                     action="#{htmlBean.pageNext}"
                                     disabled="#{htmlBean.dataTable.first + htmlBean.dataTable.rows
                                                 >= htmlBean.dataTable.rowCount}" />
                    <h:commandButton value="last" 
                                     action="#{htmlBean.pageLast}"
                                     disabled="#{htmlBean.dataTable.first + htmlBean.dataTable.rows
                                                 >= htmlBean.dataTable.rowCount}" />
                </h:panelGrid>
            </h:form>
        </div>
    </body>
</html>