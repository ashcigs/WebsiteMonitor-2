<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="stylesheet.css" />
        <title>Website Monitor - Document Viewer</title>
        <script type="text/javascript">
            function pdfInner()
            {
                
                pdfAddOnclickToDatatableRows();
                
                document.getElementById("pdfHide").style.display = 'block';
                document.getElementById("htmlHide").style.display = 'none';
                document.getElementById("rssHide").style.display = 'none';
            }
            
            function htmlInner()
            {
                htmlAddOnclickToDatatableRows();
                
                document.getElementById("pdfHide").style.display = 'none';
                document.getElementById("htmlHide").style.display = 'block';
                document.getElementById("rssHide").style.display = 'none';
            }
            
            function rssInner()
            {
                rssAddOnclickToDatatableRows();
                
                document.getElementById("pdfHide").style.display = 'none';
                document.getElementById("htmlHide").style.display = 'none';
                document.getElementById("rssHide").style.display = 'block';
            }
            
            //<![CDATA[
            function pdfAddOnclickToDatatableRows() {
                var trs = document.getElementById('pdfForm').getElementsByTagName('tbody')[0]
                .getElementsByTagName('tr');
                for (var i = 0; i < trs.length; i++) {
                    trs[i].onmouseover = new Function("this.bgColor='#d0d0d0'");
                    trs[i].onmouseout = new Function("this.bgColor='#ffffff'");
                    trs[i].onclick = new Function("pdfHighlightAndSelectRow(this)");
                }
            }

            function pdfHighlightAndSelectRow(tr) {
                var trs = document.getElementById('pdfForm').getElementsByTagName('tbody')[0]
                .getElementsByTagName('tr');
                for (var i = 0; i < trs.length; i++) {
                    if (trs[i] == tr) {
                        document.pdfForm.rowIndex.value = trs[i].rowIndex;
                        document.getElementById('pdfForm:updateEdit').click();
                    }
                }
            }
            
            function htmlAddOnclickToDatatableRows() {
                var trs = document.getElementById('htmlForm').getElementsByTagName('tbody')[0]
                .getElementsByTagName('tr');
                for (var i = 0; i < trs.length; i++) {
                    trs[i].onmouseover = new Function("this.bgColor='#d0d0d0'");
                    trs[i].onmouseout = new Function("this.bgColor='#ffffff'");
                    trs[i].onclick = new Function("htmlHighlightAndSelectRow(this)");
                }
            }

            function htmlHighlightAndSelectRow(tr) {
                var trs = document.getElementById('htmlForm').getElementsByTagName('tbody')[0]
                .getElementsByTagName('tr');
                for (var i = 0; i < trs.length; i++) {
                    if (trs[i] == tr) {
                        document.htmlForm.rowIndex.value = trs[i].rowIndex;
                        document.getElementById('htmlForm:updateEdit').click();
                    }
                }
            }            
            
            function rssAddOnclickToDatatableRows() {
                var trs = document.getElementById('rssForm').getElementsByTagName('tbody')[0]
                .getElementsByTagName('tr');
                for (var i = 0; i < trs.length; i++) {
                    trs[i].onmouseover = new Function("this.bgColor='#d0d0d0'");
                    trs[i].onmouseout = new Function("this.bgColor='#ffffff'");
                    trs[i].onclick = new Function("rssHighlightAndSelectRow(this)");
                }
            }

            function rssHighlightAndSelectRow(tr) {
                var trs = document.getElementById('rssForm').getElementsByTagName('tbody')[0]
                .getElementsByTagName('tr');
                for (var i = 0; i < trs.length; i++) {
                    if (trs[i] == tr) {
                        document.rssForm.rowIndex.value = trs[i].rowIndex;
                        document.getElementById('rssForm:updateEdit').click();
                    }
                }
            }            
            //]]>
        </script>
    </head>
    <body>
        <div id="container">
            <div id="header">
                <div id="titletext">
                    <span>Website Monitor - Document Viewer</span>
                </div>
                <div id="navbar">
                    <ul> 	
                        <li><a href="index.xhtml">Home</a></li> 	
                        <li><a href="docview.xhtml">Document Viewer</a></li> 	
                        <li><a href="maillist.xhtml">Mail List</a></li>
                        <li><a href="urllist.xhtml">URL List</a></li>
                    </ul> 
                </div>
            </div>
            <div id="contentbody">
                <div id="overview">
                    <div id="docviewerdiv">
                        <span style="font-size: 125%">Document Viewer<br/><br/></span>
                        <div id="temp">
                            <h:panelGrid rendered="#{changeBean.type == 'pdf'}">
                                <object width="850" height="500"
                                        data="#{pdfBean.dataItem.url}" id="docviewerContent">
                                    <p>Object can not be displayed!</p>
                                </object>
                            </h:panelGrid>
                            <h:panelGrid rendered="#{changeBean.type == 'html'}">
                                <object width="850" height="500"
                                        data="#{htmlBean.dataItem.url}" id="docviewerContent">
                                    <p>Object can not be displayed!</p>
                                </object>
                            </h:panelGrid>
                            <h:panelGrid rendered="#{changeBean.type == 'rss'}">
                                <object width="850" height="500"
                                        data="#{rssBean.dataItem.url}" id="docviewerContent">
                                    <p>Object can not be displayed!</p>
                                </object>
                            </h:panelGrid>
                            
                        </div>
                    </div>
                </div>
                <div id="recent">
                    <div class="tabArea">
                       <a class="tab" onclick="pdfInner()" target="myIframe">PDF</a>
                       <a class="tab" onclick="htmlInner()" target="myIframe">HTML</a>
                       <a class="tab" onclick="rssInner()" target="myIframe">RSS</a>
                   </div>
                   <div class="tabMain">
                       <div class="tabIframeWrapper">
                       <div id="tabContent">
                           <div id="pdfHide" style="display:none;">
                               <div id="tablediv">
            <h:form id="pdfForm">
                <h:dataTable id="dataTable"
                             styleClass="view-table"
                             headerClass="view-table-header"
                             rowClasses="view-table-odd-row,view-table-even-row"
                             binding="#{pdfBean.dataTable}" 
                             value="#{pdfBean.latestList}" 
                             var="dataItem" rows="18">

                    <h:column>
                        <f:facet name="header">
                            PDF Name
                        </f:facet>
                        #{dataItem.pdfName}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            Date
                        </f:facet>
                        #{dataItem.dlDate}
                    </h:column>

                </h:dataTable>
                <input type="hidden" name="rowIndex" />
                    <h:commandLink id="updateEdit" type="hidden" 
                                   immediate="true" action="#{pdfBean.selectDocument()}">
                        <f:actionListener binding="#{changeBean.setType('pdf')}"/>
                    </h:commandLink>
            </h:form>
        </div>
        <div id="navbtn">
            <h:form>
                <h:panelGrid columns="4" width="100%">
                    <h:commandButton value="first" 
                                     action="#{pdfBean.pageFirst}"
                                     disabled="#{pdfBean.dataTable.first == 0}" />
                    <h:commandButton value="prev" 
                                     action="#{pdfBean.pagePrevious}"
                                     disabled="#{pdfBean.dataTable.first == 0}" />
                    <h:commandButton value="next" 
                                     action="#{pdfBean.pageNext}"
                                     disabled="#{pdfBean.dataTable.first + pdfBean.dataTable.rows
                                                 >= pdfBean.dataTable.rowCount}" />
                    <h:commandButton value="last" 
                                     action="#{pdfBean.pageLast}"
                                     disabled="#{pdfBean.dataTable.first + pdfBean.dataTable.rows
                                                 >= pdfBean.dataTable.rowCount}" />
                </h:panelGrid>
            </h:form>            
        </div>
                           </div>
                           <div id="htmlHide" style="display:none;">
                              <div id="tablediv">
            <h:form id="htmlForm">
                <h:dataTable id="dataTable"
                    styleClass="view-table"
                             headerClass="view-table-header"
                             rowClasses="view-table-odd-row,view-table-even-row"
                             binding="#{htmlBean.dataTable}" 
                             value="#{htmlBean.latestList}" 
                             var="dataItem" rows="18">

                    <h:column>
                        <f:facet name="header">
                            URL ID
                        </f:facet>
                        #{dataItem.urlID}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            URL
                        </f:facet>
                        #{dataItem.url}
                    </h:column>

                </h:dataTable>
                <input type="hidden" name="rowIndex" />
                    <h:commandLink id="updateEdit" type="hidden" 
                                   immediate="true" action="#{htmlBean.selectDocument()}">
                        <f:actionListener binding="#{changeBean.setType('html')}"/>
                    </h:commandLink>
            </h:form>
        </div>
        <div id="navbtn">
            <h:form>
                <h:panelGrid columns="4" width="100%">
                    <h:commandButton value="first" 
                                     action="#{htmlBean.pageFirst}"
                                     disabled="#{htmlBean.dataTable.first == 0}" />
                    <h:commandButton value="prev" 
                                     action="#{htmlBean.pagePrevious}"
                                     disabled="#{htmlBean.dataTable.first == 0}" />
                    <h:commandButton value="next" 
                                     action="#{htmlBean.pageNext}"
                                     disabled="#{htmlBean.dataTable.first + htmlBean.dataTable.rows
                                                 >= htmlBean.dataTable.rowCount}" />
                    <h:commandButton value="last" 
                                     action="#{htmlBean.pageLast}"
                                     disabled="#{htmlBean.dataTable.first + htmlBean.dataTable.rows
                                                 >= htmlBean.dataTable.rowCount}" />
                </h:panelGrid>
            </h:form>
        </div> 
                           </div>
                           <div id="rssHide" style="display:none;">
                               <div id="tablediv">
            <h:form id="rssForm">
                <h:dataTable id="dataTable"
                    styleClass="view-table"
                             headerClass="view-table-header"
                             rowClasses="view-table-odd-row,view-table-even-row"
                             binding="#{rssBean.dataTable}" 
                             value="#{rssBean.latestList}" 
                             var="dataItem" rows="18">

                    <h:column>
                        <f:facet name="header">
                            URL ID
                        </f:facet>
                        #{dataItem.urlID}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            Feed Title
                        </f:facet>
                        #{dataItem.feedTitle}
                    </h:column>

                </h:dataTable>
                <input type="hidden" name="rowIndex" />
                    <h:commandLink id="updateEdit" type="hidden" 
                                       immediate="true" action="#{rssBean.selectDocument()}">
                        <f:actionListener binding="#{changeBean.setType('rss')}"/>
                    </h:commandLink>
            </h:form>
        </div>
        <div id="navbtn">
            <h:form>
                <h:panelGrid columns="4" width="100%">
                    <h:commandButton value="first" 
                                     action="#{rssBean.pageFirst}"
                                     disabled="#{rssBean.dataTable.first == 0}" />
                    <h:commandButton value="prev" 
                                     action="#{rssBean.pagePrevious}"
                                     disabled="#{rssBean.dataTable.first == 0}" />
                    <h:commandButton value="next" 
                                     action="#{rssBean.pageNext}"
                                     disabled="#{rssBean.dataTable.first + rssBean.dataTable.rows
                                                 >= rssBean.dataTable.rowCount}" />
                    <h:commandButton value="last" 
                                     action="#{rssBean.pageLast}"
                                     disabled="#{rssBean.dataTable.first + rssBean.dataTable.rows
                                                 >= rssBean.dataTable.rowCount}" />
                </h:panelGrid>
            </h:form>
        </div>
                           </div>
                       </div>
                       </div>
                   </div>
                </div>
            </div>
        </div>
    </body>
</html>