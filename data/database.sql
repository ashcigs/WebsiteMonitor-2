SET FOREIGN_KEY_CHECKS=0;
DROP TABLE IF EXISTS Users;
DROP TABLE IF EXISTS Urls;
DROP TABLE IF EXISTS Pdfs;
DROP TABLE IF EXISTS Rss;
DROP TABLE IF EXISTS Html;
DROP TABLE IF EXISTS KeyWords;
SET FOREIGN_KEY_CHECKS=1;

CREATE TABLE IF NOT EXISTS Users (
    User_Id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    User_Name VARCHAR(60),
    User_Email VARCHAR(120),
    PRIMARY KEY(User_Id));
CREATE TABLE IF NOT EXISTS Urls (
    Url_Id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    Rss_Url VARCHAR(255),
    Http_Url VARCHAR(255),
    Url_Name VARCHAR(255),
    PRIMARY KEY(Url_Id));
CREATE TABLE IF NOT EXISTS Pdfs (
    Pdf_Id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    PDf_Hash VARCHAR(255),
    Dl_Date TIMESTAMP,
    Url_Id INT UNSIGNED NOT NULL,
    Pdf_File LONGBLOB,
    Pdf_Name VARCHAR(255),
    Pdf_Url TEXT,
    PRIMARY KEY(Pdf_Id), 
    FOREIGN KEY(Url_Id) REFERENCES Urls(Url_Id) ON DELETE CASCADE);
CREATE TABLE IF NOT EXISTS Rss (
    Rss_Id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    Feed_Title VARCHAR(255),
    Feed_Des TEXT,
    Link_Title VARCHAR(255),
    Link_Des TEXT,
    Link_Pub_Date VARCHAR(30),
    Link_Link VARCHAR(255),
    Dl_Date TIMESTAMP,
    Url_Id INT UNSIGNED NOT NULL,
    PRIMARY KEY(Rss_Id), 
    FOREIGN KEY(Url_Id) REFERENCES Urls(Url_Id) ON DELETE CASCADE);
CREATE TABLE IF NOT EXISTS Html (
    Html_Id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    Html_Content TEXT,
    Dl_Date TIMESTAMP,
    Html_Name TEXT,
    Html_Url TEXT,
    Url_Id INT UNSIGNED NOT NULL,
    PRIMARY KEY(Html_Id),
    FOREIGN KEY(Url_Id) REFERENCES Urls(Url_Id) ON DELETE CASCADE);
CREATE TABLE IF NOT EXISTS KeyWords (
    Key_Word_Id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    Key_Word VARCHAR(255),
    Url_Id INT UNSIGNED NOT NULL,
    PRIMARY KEY(Key_Word_Id),
    FOREIGN KEY(Url_Id) REFERENCES Urls(Url_Id) ON DELETE CASCADE);